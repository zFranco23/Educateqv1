(this.webpackJsonpeducateqv1=this.webpackJsonpeducateqv1||[]).push([[23],{1186:function(e,t,n){"use strict";n.r(t);var a=n(671),r=n.n(a),c=n(672),o=n(110),i=n(1),s=n(697),l=n.n(s),u=n(993),b=n(1071),j=n(975),d=n(965),p=n(632),f=n(160),O=n(781),m=n.n(O),h=n(16),g=Object(d.a)((function(e){return{modal:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},iconos:{cursor:"pointer"},inputMaterial:{width:"100%"}}}));t.default=function(){var e="https://api-colegio-g12.herokuapp.com/escuela/buscar-alumnos-del-tutor",t=Object(i.useContext)(f.a).userId,n=g(),a=Object(i.useState)([]),s=Object(o.a)(a,2),d=s[0],O=s[1],x=Object(i.useState)(!1),v=Object(o.a)(x,2),C=v[0],k=v[1],w=Object(i.useState)(!1),y=Object(o.a)(w,2),N=y[0],S=y[1],A=Object(i.useState)(""),M=Object(o.a)(A,2),I=M[0],D=M[1],E=Object(i.useState)(""),z=Object(o.a)(E,2),T=z[0],V=z[1],q=Object(i.useState)(""),F=Object(o.a)(q,2),J=F[0],R=F[1],Y=Object(i.useState)(""),B=Object(o.a)(Y,2),P=B[0],W=B[1],_=Object(i.useState)(),G=Object(o.a)(_,2),H=G[0],K=G[1],L=Object(i.useState)(""),Q=Object(o.a)(L,2),U=Q[0],X=Q[1],Z=Object(i.useState)(""),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(i.useState)(""),ae=Object(o.a)(ne,2),re=(ae[0],ae[1]),ce=Object(i.useState)(""),oe=Object(o.a)(ce,2),ie=oe[0],se=oe[1],le=Object(i.useState)(""),ue=Object(o.a)(le,2),be=ue[0],je=ue[1],de=function(){var e=Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({method:"POST",url:"https://api-colegio-g12.herokuapp.com/escuela/registrar-alumno",data:{nombre:I,apellido:T,edad:ve(xe(J)),nacimiento:new Date(J),telefono:P,user:t}});case 3:n=e.sent,n.data.ok&&(alert("Alumno Insertado"),k(!1),Ce()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("No se insert\xf3");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),pe=function(e){return d.find((function(t){return t.orden==e})).id},fe=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("https://api-colegio-g12.herokuapp.com/escuela/eliminar-alumno",{data:{idAlumno:t}});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("https://api-colegio-g12.herokuapp.com/escuela/actualizar-alumno",{idAlumno:pe(t),nombre:U,apellido:ee,nacimiento:new Date(ie),telefono:be});case 2:e.sent,Ce(),ge();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){k(!1),D(""),V(""),R(""),W("")},he=function(){S(!0)},ge=function(){S(!1),K(),X(""),te(""),re(""),se(""),je("")};function xe(e){var t=e.substring(0,4),n=e.substring(5,7),a=e.substring(8,10);return"".concat(a,"/").concat(n,"/").concat(t)}function ve(e){var t=parseInt(e.substring(0,2),10),n=parseInt(e.substring(3,5),10),a=parseInt(e.substring(6,10),10),r=new Date,c=new Date(a,n,t),o=r.getFullYear()-c.getFullYear(),i=r.getMonth()-c.getMonth();return(i<0||0===i&&r.getDate()<c.getDate())&&o--,o}function Ce(){return ke.apply(this,arguments)}function ke(){return(ke=Object(c.a)(r.a.mark((function n(){var a,c,o,i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(e,"/").concat(t));case 2:return a=n.sent,n.next=5,a.json();case 5:c=n.sent,o=c.alumnos,i=o.map((function(e,t){return{orden:t+1,apellido:e.apellido,nombre:e.nombre,edad:ve(xe(e.nacimiento)),cumpleanos:xe(e.nacimiento),telefono:e.telefono,id:e._id}})),O(i);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}Object(i.useEffect)((function(){Ce()}),[]);var we=Object(h.jsxs)("div",{className:n.modal,children:[Object(h.jsx)("h3",{children:"Agregar Nuevo Alumno"}),Object(h.jsx)(u.a,{className:n.inputMaterial,label:"Apellidos",onChange:function(e){return V(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)(u.a,{className:n.inputMaterial,label:"Nombres",onChange:function(e){return D(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(u.a,{className:n.inputMaterial,type:"date",onChange:function(e){return R(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)(u.a,{className:n.inputMaterial,type:"number",label:"Tel\xe9fono",onChange:function(e){return W(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{align:"right",children:[Object(h.jsx)(p.f,{color:"info",onClick:de,style:{marginRight:"5px"},children:"Insertar"}),Object(h.jsx)(p.f,{color:"danger",onClick:me,children:"Cancelar"})]})]}),ye=Object(h.jsxs)("div",{className:n.modal,children:[Object(h.jsx)("h3",{children:"Editar Alumno"}),Object(h.jsx)(u.a,{className:n.inputMaterial,defaultValue:ee,label:"Apellidos",onChange:function(e){return te(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)(u.a,{className:n.inputMaterial,defaultValue:U,label:"Nombres",onChange:function(e){return X(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(u.a,{className:n.inputMaterial,defaultValue:ie,type:"date",onClick:function(e){return se(e.target.value)},onChange:function(e){return se(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)(u.a,{className:n.inputMaterial,defaultValue:be,type:"number",label:"Tel\xe9fono",onChange:function(e){return je(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{align:"right",children:[Object(h.jsx)(p.f,{color:"info",style:{marginRight:"5px"},onClick:function(){return Oe(H)},children:"Actualizar"}),Object(h.jsx)(p.f,{color:"danger",onClick:ge,children:"Cancelar"})]})]});return Object(h.jsxs)("div",{style:{maxWidth:"100%"},children:[Object(h.jsx)(p.f,{color:"success",style:{float:"right",marginBottom:"20px"},onClick:function(){k(!0)},children:"Insertar Alumno"}),Object(h.jsx)(b.a,{open:C,onClose:me,children:we}),Object(h.jsx)(b.a,{open:N,onClose:ge,children:ye}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),d.length>0?Object(h.jsx)(l.a,{columns:[{title:"Nro. Orden",field:"orden",type:"numeric"},{title:"Apellidos",field:"apellido"},{title:"Nombres",field:"nombre"},{title:"Edad",field:"edad",type:"numeric"},{title:"Cumplea\xf1os",field:"cumpleanos"},{title:"Tel\xe9fono",field:"telefono",type:"numeric"}],data:d,title:"Secci\xf3n A",actions:[{icon:"edit",tooltip:"Editar Alumno",onClick:function(e,t){return n=t,he(),K(n.orden),X(n.nombre),te(n.apellido),re(n.cumpleanos),se(function(e){var t=e.substring(0,2),n=e.substring(3,5),a=e.substring(6,10);return"".concat(a,"-").concat(n,"-").concat(t)}(n.cumpleanos)),void je(n.telefono);var n}},{icon:"delete",tooltip:"Eliminar Alumno",onClick:function(e,t){return n=t,void(window.confirm("Desea eliminar a : ".concat(n.nombre," ").concat(n.apellido))&&(fe(pe(n.orden)),Ce()));var n}}],options:{actionsColumnIndex:-1},localization:{header:{actions:"Acciones"}}}):Object(h.jsx)(j.a,{size:50})]})}}}]);
//# sourceMappingURL=23.a606f065.chunk.js.map