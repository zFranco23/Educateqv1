(this.webpackJsonpeducateqv1=this.webpackJsonpeducateqv1||[]).push([[16],{1180:function(e,t,n){"use strict";n.r(t);var a=n(671),r=n.n(a),o=n(672),c=n(110),i=n(1),l=n(697),s=n.n(l),u=n(965),d=n(1489),b=n(953),m=n(993),p=n(975),h=n(686),j=n(160),f=n(632),v=n(16),g=Object(u.a)({container:{marginTop:"1rem",marginBottom:"1rem"}});t.default=function(){var e=g(),t=Object(i.useState)([]),n=Object(c.a)(t,2),a=n[0],l=n[1],u=Object(i.useState)([]),O=Object(c.a)(u,2),x=O[0],y=O[1],C=Object(i.useState)([]),A=Object(c.a)(C,2),B=A[0],k=A[1],w=Object(i.useState)([]),E=Object(c.a)(w,2),S=(E[0],E[1]),N=Object(i.useState)(""),F=Object(c.a)(N,2),P=F[0],W=F[1],q=Object(i.useState)([]),L=Object(c.a)(q,2),z=L[0],D=L[1],G=Object(i.useState)([]),I=Object(c.a)(G,2),J=I[0],M=I[1],R=Object(i.useState)([]),T=Object(c.a)(R,2),_=T[0],H=T[1],K=Object(i.useState)([]),Q=Object(c.a)(K,2),U=Q[0],V=Q[1],X="https://api-colegio-g12.herokuapp.com/escuela/buscar-alumnos-del-tutor",Y="https://api-colegio-g12.herokuapp.com/escuela/ver-examenMensual",Z=Object(i.useContext)(j.a).userId,$=function(e){var t=e.map((function(e,t){return{orden:t+1,nombre:e.nombre,apellido:e.apellido,nota:e.nota}}));D(t);var n=t.filter((function(e){return 11==e.nota})),a=t.filter((function(e){return e.nota>11})),r=t.filter((function(e){return e.nota<11}));M(n),H(a),V(r)};function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(o.a)(r.a.mark((function e(t){var n,a,o,c,i,s,u,d,b,m,p,h,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(X,"/").concat(Z));case 2:return n=e.sent,e.next=5,n.json();case 5:for(a=e.sent,o=a.alumnos,c=a.tutor.cursos,i=new Array,s=new Array,u=0;u<c.length;u++)i.includes(c[u].nombre)||s.push(c[u]),i.push(c[u].nombre);d=s.map((function(e,t){return{value:e.nombre,label:e.nombre,id:e._id}})),y(d),W(d[0].value),b=o.map((function(e,t){return{id:e._id,nombre:e.nombre,apellido:e.apellido}})),l(b),m=d.find((function(e){return e.label==d[0].label})),p=m.id,h=t.filter((function(e){return e.curso==p})),console.log(h),j=h.map((function(e,t){var n=b.find((function(t){return t.id==e.alumno}));return n.nota=e.nota,n})),$(j);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(o.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Y,"/").concat(Z));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.examen,k(a),ee(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(i.useEffect)((function(){!function(){ne.apply(this,arguments)}()}),[]);var ae=Object(v.jsxs)("div",{style:{margin:"1rem"},children:[Object(v.jsxs)(f.a,{color:"danger",children:[Object(v.jsx)("span",{style:{fontWeight:"bold"},children:"\xa1Atenci\xf3n!"})," Alumnos desaprobados :"]}),Object(v.jsx)("div",{style:{marginLeft:"2rem"},children:U.map((function(e,t){return Object(v.jsx)(b.a,{variant:"h6",children:"".concat(e.nombre," ").concat(e.apellido," : ").concat(e.nota)},t)}))})]}),re=Object(v.jsxs)("div",{style:{margin:"1rem"},children:[Object(v.jsx)(f.a,{color:"primary",children:"Alumnos que aprobaron :"}),Object(v.jsx)("div",{style:{marginLeft:"2rem"},children:_.map((function(e,t){return Object(v.jsx)(b.a,{variant:"h6",children:"".concat(e.nombre," ").concat(e.apellido," : ").concat(e.nota)},t)}))})]}),oe=Object(v.jsxs)("div",{style:{margin:"1rem"},children:[Object(v.jsx)(f.a,{color:"warning",children:"Alumnos con nota regular :"}),Object(v.jsx)("div",{style:{marginLeft:"2rem"},children:J.map((function(e,t){return Object(v.jsx)(b.a,{variant:"h6",children:"".concat(e.nombre," ").concat(e.apellido," : ").concat(e.nota)},t)}))})]});return Object(v.jsxs)("div",{style:{maxWidth:"100%"},children:[(null===x||void 0===x?void 0:x.length)?Object(v.jsx)(m.a,{id:"outlined-select-currency-native",select:!0,label:"Curso",value:P,onChange:function(e){W(e.target.value);var t=x.find((function(t){return t.label==e.target.value})).id,n=B.filter((function(e){return e.curso==t}));S(n);var r=n.map((function(e,t){var n=a.find((function(t){return t.id==e.alumno}));return n.nota=e.nota,n}));$(r)},SelectProps:{native:!0},helperText:"Seleccione un Curso",variant:"outlined",style:{marginBottom:"1rem"},children:x.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.label},e.value)}))}):Object(v.jsx)(p.a,{size:50}),Object(v.jsx)(s.a,{columns:[{title:"Nro. Orden",field:"orden",type:"numeric"},{title:"Apellidos",field:"apellido"},{title:"Nombres",field:"nombre"},{title:"Nota",field:"nota",type:"numeric"}],data:z,title:"Secci\xf3n A - Ex\xe1menes Mensuales",actions:[{icon:"edit",tooltip:"Editar Alumno",onClick:function(e,t){return alert("Has elegido editar al alumno:"+t.nombre)}},{icon:"delete",tooltip:"Eliminar Alumno",onClick:function(e,t){return window.confirm("\xbfEst\xe1s seguro de eliminar al alumno: "+t.nombre+"?")}}],options:{actionsColumnIndex:-1},localization:{header:{actions:"Acciones"}}}),(null===z||void 0===z?void 0:z.length)&&function(){var t=Array(),n=Array(),a=0,r=0,o=0,c=0,i=0;z.forEach((function(e){var l=e.nombre,s=e.apellido,u=e.nota;t.push(parseFloat(u)),n.push("".concat(l," ").concat(s.charAt(0),".")),u>=0&&u<=3&&a++,u>=4&&u<=7&&r++,u>=8&&u<=11&&o++,u>=12&&u<=15&&c++,u>=16&&u<=20&&i++}));var l={labels:["0 - 3","4 - 7","8 - 11","12 - 15","16 - 20"],datasets:[{label:"Notas en rango",backgroundColor:"#BAE617",borderColor:"#8EAB22",borderWidth:1,hoverBackgroundColor:"#C8C536",hoverBorderColor:"98963C",data:[a,r,o,c,i]}]},s={labels:n,datasets:[{label:"Nota",backgroundColor:"green",borderColor:"green",borderWidth:2,hoverBackgroundColor:"#62D616",hoverBorderColor:"98963C",data:t,barPercentage:.5,categoryPercentage:1}]},u={maintainAspectRatio:!1,responsive:!0},m={labels:["Desaprobados","Aprobados","Neutral"],datasets:[{data:[U.length,_.length,J.length],backgroundColor:["#FC0404","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]};return Object(v.jsxs)(d.a,{container:!0,className:e.container,children:[Object(v.jsxs)(d.a,{item:!0,xs:12,sm:12,md:12,children:[Object(v.jsx)(b.a,{style:{textAlign:"center",marginBottom:"0.5rem"},variant:"h6",children:" Grafico de alumno por nota "}),Object(v.jsx)(h.a,{style:{height:"300px"},type:"bar",datasets:s.datasets,labels:s.labels,options:u})]}),Object(v.jsxs)(d.a,{item:!0,xs:12,sm:12,md:6,className:e.graphic,children:[Object(v.jsx)(b.a,{style:{textAlign:"center",marginBottom:"0.5rem"},variant:"h6",children:" Gr\xe1fico de Barras"}),Object(v.jsx)(h.a,{style:{height:"250px"},type:"bar",datasets:l.datasets,labels:l.labels,options:u})]}),Object(v.jsxs)(d.a,{item:!0,xs:12,sm:12,md:6,className:e.graphic,children:[Object(v.jsx)(b.a,{style:{textAlign:"center",marginBottom:"0.5rem"},variant:"h6",children:"Resumen del salon"}),Object(v.jsx)(h.a,{type:"pie",datasets:m.datasets,labels:m.labels})]})]})}(),(null===U||void 0===U?void 0:U.length)>0&&ae,(null===_||void 0===_?void 0:_.length)>0&&re,(null===J||void 0===J?void 0:J.length)>0&&oe]})}},671:function(e,t,n){e.exports=n(379)},672:function(e,t,n){"use strict";function a(e,t,n,a,r,o,c){try{var i=e[o](c),l=i.value}catch(s){return void n(s)}i.done?t(l):Promise.resolve(l).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function i(e){a(c,r,o,i,l,"next",e)}function l(e){a(c,r,o,i,l,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return r}))}}]);
//# sourceMappingURL=16.d2935a7d.chunk.js.map